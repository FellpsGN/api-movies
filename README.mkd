# ğŸ“ Movies API

A RESTful API for managing **users**, **movies notes** and **tags** â€” built with **Node.js**, **Express** and **SQLite**, using **Knex.js** for database manipulation, **JWT** for authenticating users.

---

## ğŸš€ Features

- Create users
- Create movies notes with associated tags
- Get movies notes by user
- Filter movie notes by title and tags
- Get all tags for a user
- Delete movies notes

---

## ğŸ“ How to run

1. **Clone the repository**
```bash
git clone https://github.com/FellpsGN/api-movies.git
```

2. **Navigate to the project folder**
```bash
cd api-movies
```

3. **Install dependencies**
```bash
npm install
```

4. **Start Server**
```bash
npm run dev
```
---

## ğŸ“¦ Technologies Used

- Node.js
- Express.js
- SQLite
- Knex.js
- JWT
- Multer
- Swagger

---

## ğŸ“ Project Structure

```bash
â”œâ”€â”€ knexfile.js
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ README.mkd
â”œâ”€â”€ .gitignore
â”œâ”€â”€ tmp
â”‚   â”œâ”€â”€ .gitkeep
â”‚   â””â”€â”€ uploads
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ config
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ swagger.js
â”‚   â”‚   â””â”€â”€ upload.js
â”‚   â”œâ”€â”€ controllers
â”‚   â”‚   â”œâ”€â”€ users.controller.js
â”‚   â”‚   â”œâ”€â”€ movies.controller.js
â”‚   â”‚   â”œâ”€â”€ sessions.controller.js
â”‚   â”‚   â”œâ”€â”€ userAvatar.controller.js
â”‚   â”‚   â””â”€â”€ tags.controller.js
â”‚   â”œâ”€â”€ database
â”‚   â”‚   â””â”€â”€ knex
â”‚   â”‚       â”œâ”€â”€ migrations
â”‚   â”‚       â””â”€â”€ index.js
â”‚   â”œâ”€â”€ middlewares
â”‚   â”‚   â””â”€â”€ ensureAuthenticated.js
â”‚   â”œâ”€â”€ providers
â”‚   â”‚   â””â”€â”€ DiskStorage.js
â”‚   â”œâ”€â”€ routes
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ users.routes.js
â”‚   â”‚   â”œâ”€â”€ movies.routes.js
â”‚   â”‚   â”œâ”€â”€ sessions.routes.js
â”‚   â”‚   â””â”€â”€ tags.routes.js
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â””â”€â”€ AppError.js
â”‚   â””â”€â”€ server.js
```

# ğŸ“Œ API Endpoints

![Endpoints](./.github/swagger_routes.png)

## ğŸ§‘â€ğŸ’» Users

- POST - `/users` | Create User
```json
{
    "user_name": "Woody lightyear",
    "user_email": "buzz.lightyear@email.com",
    "user_pass": "toInfinityAndBeyond"
}
```

- PUT  - `/users` | Update User (name & email)
```json
{
    "name": "Buzz Lightyear",
    "email": "buzz.lightyear@email.com"
}
```

- PUT  - `/users` | Update User (name & email & password)
```json
{
    "user_name": "Buzz Lightyear",
    "user_email": "buzz.lightyear@email.com",
    "user_pass": "iAmBuzzLightyear",
    "old_pass": "toInfinityAndBeyond"
}
```

- PATCH - `/users/avatar` | Update User Avatar

- GET  - `/users` | Get user By Id

- DELETE - `/users` | Delete user authenticated
```json
{
    "user_email": "buzz.lightyear@email.com"
}
```

## ğŸ·ï¸ Sessions

- POST - `/sessions` | Create JWT Token
```json
{
  "user_email": "fulano.silva@email.com",
  "user_pass": "fulano12345"
}
```

## ğŸ—’ï¸ Movies
- POST - `/movies` | Create movie By User ID
```json
{
  "movie_note_title": "Harry and your glasses",
  "movie_title": "Harry Potter and the Prisioner of Azkaban",
  "movie_note_description": "They should change the Harry's glasses when..",
  "movie_note_rating": 5,
  "tags": ["Fantasy", "Adventure"]
}
```

- GET - `/movies` | Get Movies Notes By User

- DELETE - `/:movie_note_id` | Delete Movie Note By ID

## ğŸ·ï¸ Tags

- GET - `/tags` | Get All Tags By User ID

# ğŸ§ª Tests
You can test the routes using Postman, Insomnia, or another HTTP client.